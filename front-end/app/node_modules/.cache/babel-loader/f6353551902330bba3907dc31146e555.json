{"remainingRequest":"C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\src\\components\\AddPost.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\src\\components\\AddPost.vue","mtime":1635333945295},{"path":"C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\babel.config.js","mtime":1635333945277},{"path":"C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639160574026},{"path":"C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1639160574342},{"path":"C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639160574026},{"path":"C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1639160574788}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport apiRequests from \"./../javascript/apiRequests.js\";\nimport errorHandling from \"./../javascript/errorHandling.js\";\nexport default {\n  name: 'addpost',\n  data: function data() {\n    return {\n      topic: 'Varia',\n      title: '',\n      description: '',\n      reward_description: '',\n      file_location: '',\n      file: null\n    };\n  },\n  methods: {\n    loadTextFromFile: function loadTextFromFile(input) {\n      this.file = input.target.files[0];\n    },\n    resetFields: function resetFields() {\n      var _this = this;\n\n      this.topic = 'Varia';\n      this.title = '';\n      this.description = '';\n      this.reward_description = '';\n      this.file_location = '';\n      this.file = null;\n      this.$nextTick(function () {\n        return _this.$validator.reset();\n      });\n    },\n    postFormData: function postFormData() {\n      var _this2 = this;\n\n      apiRequests.postRequestToApiWithAuthorization('/api/add/post', {\n        topic: this.topic,\n        title: this.title,\n        description: this.description,\n        rewardDescription: this.reward_description,\n        fileLocation: this.file_location\n      }).then(function () {\n        errorHandling.successMsg(\"Post successfully uploaded!\", 1200);\n\n        _this2.resetFields();\n      }).catch(function (error) {\n        if (error.response.status === 401 || error.response.status === 403) {\n          errorHandling.errorMsgWithButton(\"You need to be logged in to post!\");\n        } else {\n          errorHandling.errorMsgWithButton(\"Sorry, \" + \"there was a problem and the post couldn't be uploaded!\");\n        }\n      });\n    },\n    processForm: function processForm() {\n      var _this3 = this;\n\n      this.$validator.validate().then(function (valid) {\n        if (valid) {\n          if (_this3.file === null || _this3.file === undefined) {\n            _this3.postFormData();\n          } else {\n            var formData = new FormData();\n            formData.append('file', _this3.file);\n            apiRequests.postRequestToApiWithAuthorization('/api/uploadFile', formData).then(function (response) {\n              _this3.file_location = response.data.fileDownloadUri;\n\n              _this3.postFormData();\n            }).catch(function () {\n              errorHandling.errorMsgWithButton(\"There was a problem uploading Your file!\" + \"Check the limitations!\");\n            });\n          }\n        } else {\n          errorHandling.errorMsg(\"The form wasn't filled in properly!\", 1000);\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["AddPost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA,OAAA,WAAA;AACA,OAAA,aAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,OADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,WAAA,EAAA,EAHA;AAIA,MAAA,kBAAA,EAAA,EAJA;AAKA,MAAA,aAAA,EAAA,EALA;AAMA,MAAA,IAAA,EAAA;AANA,KAAA;AAQA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA,4BACA,KADA,EACA;AACA,WAAA,IAAA,GAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,KAHA;AAIA,IAAA,WAJA,yBAIA;AAAA;;AACA,WAAA,KAAA,GAAA,OAAA;AACA,WAAA,KAAA,GAAA,EAAA;AACA,WAAA,WAAA,GAAA,EAAA;AACA,WAAA,kBAAA,GAAA,EAAA;AACA,WAAA,aAAA,GAAA,EAAA;AACA,WAAA,IAAA,GAAA,IAAA;AACA,WAAA,SAAA,CAAA;AAAA,eAAA,KAAA,CAAA,UAAA,CAAA,KAAA,EAAA;AAAA,OAAA;AACA,KAZA;AAaA,IAAA,YAbA,0BAaA;AAAA;;AACA,MAAA,WAAA,CACA,iCADA,CACA,eADA,EACA;AACA,QAAA,KAAA,EAAA,KAAA,KADA;AAEA,QAAA,KAAA,EAAA,KAAA,KAFA;AAGA,QAAA,WAAA,EAAA,KAAA,WAHA;AAIA,QAAA,iBAAA,EAAA,KAAA,kBAJA;AAKA,QAAA,YAAA,EAAA,KAAA;AALA,OADA,EAQA,IARA,CAQA,YAAA;AACA,QAAA,aAAA,CAAA,UAAA,CAAA,6BAAA,EAAA,IAAA;;AACA,QAAA,MAAA,CAAA,WAAA;AACA,OAXA,EAYA,KAZA,CAYA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA,CAAA,MAAA,KAAA,GAAA,IAAA,KAAA,CAAA,QAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,UAAA,aAAA,CAAA,kBAAA,CAAA,mCAAA;AACA,SAFA,MAEA;AACA,UAAA,aAAA,CAAA,kBAAA,CAAA,YACA,wDADA;AAEA;AACA,OAnBA;AAoBA,KAlCA;AAmCA,IAAA,WAnCA,yBAmCA;AAAA;;AACA,WAAA,UAAA,CAAA,QAAA,GAAA,IAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,cAAA,MAAA,CAAA,IAAA,KAAA,IAAA,IAAA,MAAA,CAAA,IAAA,KAAA,SAAA,EAAA;AACA,YAAA,MAAA,CAAA,YAAA;AACA,WAFA,MAEA;AACA,gBAAA,QAAA,GAAA,IAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,MAAA,CAAA,MAAA,EAAA,MAAA,CAAA,IAAA;AACA,YAAA,WAAA,CACA,iCADA,CACA,iBADA,EACA,QADA,EAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA,cAAA,MAAA,CAAA,aAAA,GAAA,QAAA,CAAA,IAAA,CAAA,eAAA;;AACA,cAAA,MAAA,CAAA,YAAA;AACA,aALA,EAMA,KANA,CAMA,YAAA;AACA,cAAA,aAAA,CAAA,kBAAA,CAAA,6CACA,wBADA;AAEA,aATA;AAWA;AACA,SAlBA,MAkBA;AACA,UAAA,aAAA,CAAA,QAAA,CAAA,qCAAA,EAAA,IAAA;AACA;AACA,OAtBA;AAuBA;AA3DA;AAZA,CAAA","sourcesContent":["<template>\r\n  <div class=\"container-fluid\">\r\n    <div class=\"row justify-content-center\">\r\n      <div class=\"col-xl-5 col-lg-6 col-md-8 col-sm-11\">\r\n\r\n        <h3>Create a task for others to solve!</h3>\r\n\r\n        <form id=\"post-form\" @submit.prevent=\"processForm\">\r\n\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"topic\">Topic:</label>\r\n            <select class=\"form-control\" id=\"topic\" name=\"topic\" v-model=\"topic\" v-validate=\"{ required: true }\">\r\n              <option value=\"Mathematics\">Mathematics</option>\r\n              <option value=\"Physics\">Physics</option>\r\n              <option value=\"Chemistry\">Chemistry</option>\r\n              <option value=\"Biology\">Biology</option>\r\n              <option value=\"Computer_Science\">Computer Science</option>\r\n              <option value=\"Varia\" selected=\"selected\">Varia</option>\r\n            </select>\r\n            <div class=\"error\" v-if=\"errors.has('topic')\">{{errors.first('topic')}}</div>\r\n          </div>\r\n\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"title\">Title:</label>\r\n            <input id=\"title\" class=\"form-control\" type=\"text\" name=\"title\" placeholder=\"Title\"\r\n                   v-model=\"title\" v-validate=\"{ required: true, min: 3, max: 128 }\">\r\n            <div class=\"error\" v-if=\"errors.has('title')\">{{errors.first('title')}}</div>\r\n          </div>\r\n\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"description\">Description:</label>\r\n            <textarea class=\"form-control\" id=\"description\" rows=\"3\"\r\n                      name=\"description\" placeholder=\"Description\" onkeydown=\"{if(event.keyCode === 13) return false;}\"\r\n                      v-model=\"description\" v-validate=\"{ required: true, min: 5 }\">\r\n            </textarea>\r\n            <div class=\"error\" v-if=\"errors.has('description')\">{{errors.first('description')}}</div>\r\n          </div>\r\n\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"reward_description\">Reward description:</label>\r\n            <input id=\"reward_description\" class=\"form-control\" type=\"text\" name=\"reward_description\"\r\n                   placeholder=\"Reward description\" v-model=\"reward_description\">\r\n          </div>\r\n\r\n\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"fileUpload\">File:</label><br/>\r\n            <label class=\"custom-file-upload\" for=\"fileUpload\">\r\n              Choose a file\r\n            </label>\r\n            <input type=\"file\" class=\"form-control-file\" id=\"fileUpload\" @change=\"loadTextFromFile\">\r\n            <p>\r\n              <small>\r\n                Max file size: 20MB <br/>\r\n                Allowed file types: .txt, .pdf, .png, .jpg, .doc, .docx, .xls, .xlsx, .rtf, .jpeg, .tiff, .ppt\r\n              </small>\r\n            </p>\r\n          </div>\r\n\r\n          <input class=\"btn btn-lg btn-primary mb-3\" type=\"submit\" value=\"Submit\">\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\n    import apiRequests from './../javascript/apiRequests.js';\r\n    import errorHandling from './../javascript/errorHandling.js';\r\n\r\n    export default {\r\n        name: 'addpost',\r\n        data() {\r\n            return {\r\n                topic: 'Varia',\r\n                title: '',\r\n                description: '',\r\n                reward_description: '',\r\n                file_location: '',\r\n                file: null\r\n            };\r\n        },\r\n        methods: {\r\n            loadTextFromFile(input) {\r\n                this.file = input.target.files[0];\r\n            },\r\n            resetFields() {\r\n                this.topic = 'Varia';\r\n                this.title = '';\r\n                this.description = '';\r\n                this.reward_description = '';\r\n                this.file_location = '';\r\n                this.file = null;\r\n                this.$nextTick(() => this.$validator.reset())\r\n            },\r\n            postFormData() {\r\n                apiRequests\r\n                    .postRequestToApiWithAuthorization('/api/add/post', {\r\n                        topic: this.topic,\r\n                        title: this.title,\r\n                        description: this.description,\r\n                        rewardDescription: this.reward_description,\r\n                        fileLocation: this.file_location,\r\n                    })\r\n                    .then(() => {\r\n                        errorHandling.successMsg(\"Post successfully uploaded!\", 1200);\r\n                        this.resetFields();\r\n                    })\r\n                    .catch((error) => {\r\n                        if (error.response.status === 401 || error.response.status === 403) {\r\n                            errorHandling.errorMsgWithButton(\"You need to be logged in to post!\");\r\n                        } else {\r\n                            errorHandling.errorMsgWithButton(\"Sorry, \" +\r\n                                \"there was a problem and the post couldn't be uploaded!\");\r\n                        }\r\n                    });\r\n            },\r\n            processForm() {\r\n                this.$validator.validate().then(valid => {\r\n                    if (valid) {\r\n                        if (this.file === null || this.file === undefined) {\r\n                            this.postFormData();\r\n                        } else {\r\n                            const formData = new FormData();\r\n                            formData.append('file', this.file);\r\n                            apiRequests\r\n                                .postRequestToApiWithAuthorization('/api/uploadFile', formData)\r\n                                .then((response) => {\r\n                                    this.file_location = response.data.fileDownloadUri;\r\n                                    this.postFormData();\r\n                                })\r\n                                .catch(() => {\r\n                                        errorHandling.errorMsgWithButton(\"There was a problem uploading Your file!\" +\r\n                                            \"Check the limitations!\")\r\n                                    }\r\n                                );\r\n                        }\r\n                    } else {\r\n                        errorHandling.errorMsg(\"The form wasn't filled in properly!\", 1000);\r\n                    }\r\n                });\r\n            },\r\n        },\r\n    };\r\n</script>\r\n\r\n\r\n<style scoped>\r\n  .custom-file-upload {\r\n    border: 2px solid gray;\r\n    color: gray;\r\n    background-color: white;\r\n    padding: 8px 20px;\r\n    border-radius: 8px;\r\n    font-size: 20px;\r\n    font-weight: bold;\r\n  }\r\n\r\n  input[type=file] {\r\n    display: none;\r\n  }\r\n</style>\r\n"],"sourceRoot":"src/components"}]}