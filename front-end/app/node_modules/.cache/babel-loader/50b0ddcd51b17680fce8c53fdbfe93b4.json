{"remainingRequest":"C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\src\\components\\layout\\UpperNavbar.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\src\\components\\layout\\UpperNavbar.vue","mtime":1656431639659},{"path":"C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\babel.config.js","mtime":1656431591931},{"path":"C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656431599999},{"path":"C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1656431636533},{"path":"C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1656431598858},{"path":"C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656431599999},{"path":"C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1656431637646}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport errorHandling from \"./../../javascript/errorHandling.js\";\nimport apiRequests from \"./../../javascript/apiRequests.js\";\nimport VueJwtDecode from 'vue-jwt-decode';\nimport Search from \"./Search\";\nexport default {\n  name: \"Login\",\n  components: {\n    Search: Search\n  },\n  data: function data() {\n    return {\n      loginUsername: '',\n      loginPassword: '',\n      loggedIn: false\n    };\n  },\n  methods: {\n    logIn: function logIn() {\n      var _this = this;\n\n      apiRequests.postRequestToApi('/api/login', {\n        username: this.loginUsername,\n        password: this.loginPassword\n      }).then(function (response) {\n        localStorage.setItem(\"Authorization\", response.headers.authorization);\n\n        _this.resetFields();\n\n        _this.loggedIn = true;\n        errorHandling.successMsg(\"You are logged in!\", 1000);\n\n        _this.$router.push({\n          name: 'viewAppointments'\n        });\n      }).catch(function () {\n        errorHandling.errorMsg(\"Wrong username or password, try again!\", 1200);\n      });\n    },\n    resetFields: function resetFields() {\n      this.loginUsername = '';\n      this.loginPassword = '';\n    },\n    logout: function logout() {\n      this.loggedIn = false;\n      localStorage.removeItem(\"Authorization\");\n      this.$router.push(\"/\");\n    },\n    checkToken: function checkToken() {\n      var token = localStorage.getItem('Authorization');\n\n      if (token === null || token === undefined) {\n        this.loggedIn = false;\n        this.$router.push(\"/\");\n      }\n    }\n  },\n  beforeMount: function beforeMount() {\n    var token = localStorage.getItem('Authorization');\n\n    if (token !== null && token !== undefined) {\n      var tokenString = token.split(\"Bearer \")[1];\n      var exp = VueJwtDecode.decode(tokenString)[\"exp\"];\n\n      if (Date.now() / 1000 > exp - 86400) {\n        this.loggedIn = false;\n        localStorage.removeItem(\"Authorization\");\n        this.$router.push(\"/\");\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    if (localStorage.getItem(\"Authorization\") !== null) {\n      apiRequests.getRequestToApiWithAuthorization('/api/check').then(function (response) {\n        if (response.status === 200) {\n          _this2.loggedIn = true;\n        }\n      }).catch(function () {\n        _this2.loggedIn = false;\n\n        _this2.logout();\n      });\n    }\n  }\n};",{"version":3,"sources":["UpperNavbar.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <nav class=\"p-2\">\r\n    <div class=\"text-right\">\r\n      <div style=\"float:left\">\r\n        <Search/>\r\n      </div>\r\n      <router-link class=\"btn btn-dark mx-1\" id=\"home\" tag=\"button\" to=\"/\"\r\n                  exact>\r\n        Home\r\n      </router-link>\r\n      <router-link class=\"btn btn-dark mx-1\" id=\"makeAppointments\" tag=\"button\" to=\"/makeAppointment\" @click=\"checkToken\"\r\n                   v-if=\"loggedIn\" exact>\r\n        Make an appointment\r\n      </router-link>\r\n\r\n      <router-link class=\"btn btn-dark mx-1\" id=\"register\" tag=\"button\" to=\"/registration\" @click=\"checkToken\"\r\n                   v-if=\"!loggedIn\" exact>\r\n        Register\r\n      </router-link>\r\n\r\n      <router-link class=\"btn btn-dark mx-1\" id=\"myAppointments\" tag=\"button\" to=\"/userAppointments\" v-if=\"loggedIn\"\r\n                   exact>\r\n        My Appointments\r\n      </router-link>\r\n\r\n      <button class=\"btn btn-dark mx-1\" id=\"logout\" v-if=\"loggedIn\" @click=\"logout\">Logout\r\n      </button>\r\n\r\n      <div class=\"dropdown\" v-if=\"!loggedIn\">\r\n        <button type=\"button\" id=\"dropdownMenuButton\" data-toggle=\"dropdown\" aria-haspopup=\"true\"\r\n                aria-expanded=\"false\" class=\"btn btn-dark dropdown-toggle\">Login\r\n        </button>\r\n        <div class=\"dropdown-menu dropdown-menu-right py-0\">\r\n          <div class=\"px-3 pt-3 login-dropdown\">\r\n\r\n            <form @submit.prevent=\"logIn\">\r\n              <div class=\"form-group\">\r\n                <input id=\"usernameInput\" placeholder=\"Username\" name=\"loginUsername\"\r\n                       class=\"form-control form-control-sm custom-input\" type=\"text\"\r\n                       v-model=\"loginUsername\"\r\n                       autocomplete=\"username\">\r\n              </div>\r\n\r\n              <div class=\"form-group\">\r\n                <input id=\"passwordInput\" placeholder=\"Password\" name=\"loginPassword\"\r\n                       class=\"form-control form-control-sm\" type=\"password\"\r\n                       v-model=\"loginPassword\"\r\n                       autocomplete=\"new-password\">\r\n              </div>\r\n              <div class=\"form-group\">\r\n                <button type=\"submit\" class=\"btn btn-primary btn-block\" name=\"login\">Login</button>\r\n              </div>\r\n            </form>\r\n\r\n            <div class=\"form-group text-center\">\r\n              <small>\r\n                <router-link id=\"forgotPassword\" tag=\"a\" to=\"/forgotPassword\" exact>\r\n                  Forgot password?\r\n                </router-link>\r\n              </small>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </nav>\r\n</template>\r\n\r\n<script>\r\n    import errorHandling from './../../javascript/errorHandling.js';\r\n    import apiRequests from './../../javascript/apiRequests.js';\r\n    import VueJwtDecode from 'vue-jwt-decode';\r\n    import Search from './Search';\r\n\r\n\r\n    export default {\r\n        name: \"Login\",\r\n      components: {Search},\r\n      data() {\r\n            return {\r\n                loginUsername: '',\r\n                loginPassword: '',\r\n                loggedIn: false,\r\n            };\r\n        },\r\n        methods: {\r\n            logIn() {\r\n                apiRequests\r\n                    .postRequestToApi('/api/login', {\r\n                        username: this.loginUsername,\r\n                        password: this.loginPassword\r\n                    })\r\n                    .then((response) => {\r\n                        localStorage.setItem(\"Authorization\", response.headers.authorization);\r\n                        this.resetFields();\r\n                        this.loggedIn = true;\r\n                        errorHandling.successMsg(\"You are logged in!\", 1000);\r\n                        this.$router.push({name: 'viewAppointments'})\r\n                    })\r\n                    .catch(() => {\r\n                        errorHandling.errorMsg(\"Wrong username or password, try again!\", 1200);\r\n                    });\r\n            },\r\n            resetFields() {\r\n                this.loginUsername = '';\r\n                this.loginPassword = '';\r\n            },\r\n            logout() {\r\n                this.loggedIn = false;\r\n                localStorage.removeItem(\"Authorization\");\r\n                this.$router.push(\"/\");\r\n            },\r\n            checkToken() {\r\n                let token = localStorage.getItem('Authorization');\r\n                if (token === null || token === undefined) {\r\n                    this.loggedIn = false;\r\n                    this.$router.push(\"/\");\r\n                }\r\n            }\r\n        },\r\n        beforeMount() {\r\n            let token = localStorage.getItem('Authorization');\r\n            if (token !== null && token !== undefined) {\r\n                let tokenString = token.split(\"Bearer \")[1];\r\n                let exp = (VueJwtDecode.decode(tokenString))[\"exp\"];\r\n                if (Date.now() / 1000 > exp - 86400) {\r\n                    this.loggedIn = false;\r\n                    localStorage.removeItem(\"Authorization\");\r\n                    this.$router.push(\"/\");\r\n                }\r\n            }\r\n        },\r\n        mounted() {\r\n            if (localStorage.getItem(\"Authorization\") !== null) {\r\n                apiRequests.getRequestToApiWithAuthorization('/api/check')\r\n                    .then(response => {\r\n                        if (response.status === 200) {\r\n                            this.loggedIn = true;\r\n                        }\r\n                    })\r\n                    .catch(() => {\r\n                        this.loggedIn = false;\r\n                        this.logout();\r\n                    });\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n  .dropdown {\r\n    display: inline-block !important;\r\n  }\r\n\r\n  nav {\r\n    background-color: #D6BDF3;\r\n  }\r\n\r\n  .login-dropdown {\r\n    background-color: white;\r\n    text-align: center;\r\n  }\r\n\r\n  .custom-input {\r\n    width: 200px;\r\n  }\r\n\r\n</style>\r\n"],"sourceRoot":"src/components/layout"}]}