{"remainingRequest":"C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\src\\components\\MakeAppointment.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\src\\components\\MakeAppointment.vue","mtime":1656431639652},{"path":"C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\babel.config.js","mtime":1656431591931},{"path":"C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656492261885},{"path":"C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1656431598858},{"path":"C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656492261885},{"path":"C:\\Users\\alvar\\Desktop\\Staff\\My Projects\\dentistapp\\front-end\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1656492262442}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport apiRequests from \"./../javascript/apiRequests.js\";\nimport errorHandling from \"./../javascript/errorHandling.js\";\nimport VueCtkDateTimePicker from 'vue-ctk-date-time-picker';\nimport 'vue-ctk-date-time-picker/dist/vue-ctk-date-time-picker.css';\nimport Datepicker from 'vuejs-datepicker';\nexport default {\n  name: 'makeAppointment',\n  components: {\n    VueCtkDateTimePicker: VueCtkDateTimePicker\n  },\n  data: function data() {\n    return {\n      dentistName: '',\n      visitTime: '',\n      procedure: '',\n      description: '',\n      dateTime: '',\n      disabledHours: ['00', '01', '02', '03', '04', '05', '06', '07', '19', '20', '21', '22', '23'],\n      minDate: ''\n    };\n  },\n  methods: {\n    resetFields: function resetFields() {\n      var _this = this;\n\n      this.dentistName = '';\n      this.visitTime = '';\n      this.procedure = '';\n      this.description = '';\n      this.$nextTick(function () {\n        return _this.$validator.reset();\n      });\n    },\n    postFormData: function postFormData() {\n      var _this2 = this;\n\n      apiRequests.postRequestToApiWithAuthorization('/api/add/visit', {\n        dentistName: this.dentistName,\n        visitTime: this.visitTime,\n        procedure: this.procedure,\n        description: this.description\n      }).then(function () {\n        errorHandling.successMsg(\"Appointment successfully made!\", 1200);\n\n        _this2.resetFields();\n      }).catch(function (error) {\n        if (error.response.status === 401 || error.response.status === 403) {\n          errorHandling.errorMsgWithButton(\"You need to be logged in to make an appointment!\");\n        } else if (error.response.status === 400) {\n          errorHandling.errorMsgWithButton(\"This appointment time is already taken. \" + \"Please try a different datetime.\");\n        } else {\n          errorHandling.errorMsgWithButton(\"Sorry, \" + \"there was a problem and could not make an appointment!\");\n        }\n      });\n    },\n    processForm: function processForm() {\n      var _this3 = this;\n\n      this.$validator.validate().then(function (valid) {\n        if (valid) {\n          _this3.postFormData();\n        } else {\n          errorHandling.errorMsg(\"The form wasn't filled in properly!\", 1000);\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    var moment = require('moment'); // require\n\n\n    this.minDate = moment().format(\"YYYY-MM-DD HH\");\n  }\n};",{"version":3,"sources":["MakeAppointment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA,OAAA,WAAA;AACA,OAAA,aAAA;AACA,OAAA,oBAAA,MAAA,0BAAA;AACA,OAAA,4DAAA;AACA,OAAA,UAAA,MAAA,kBAAA;AAGA,eAAA;EACA,IAAA,EAAA,iBADA;EAEA,UAAA,EAAA;IACA,oBAAA,EAAA;EADA,CAFA;EAOA,IAPA,kBAOA;IACA,OAAA;MAEA,WAAA,EAAA,EAFA;MAGA,SAAA,EAAA,EAHA;MAIA,SAAA,EAAA,EAJA;MAKA,WAAA,EAAA,EALA;MAMA,QAAA,EAAA,EANA;MAOA,aAAA,EAAA,CAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,CAPA;MAQA,OAAA,EAAA;IARA,CAAA;EAUA,CAlBA;EAmBA,OAAA,EAAA;IAEA,WAFA,yBAEA;MAAA;;MACA,KAAA,WAAA,GAAA,EAAA;MACA,KAAA,SAAA,GAAA,EAAA;MACA,KAAA,SAAA,GAAA,EAAA;MACA,KAAA,WAAA,GAAA,EAAA;MACA,KAAA,SAAA,CAAA;QAAA,OAAA,KAAA,CAAA,UAAA,CAAA,KAAA,EAAA;MAAA,CAAA;IACA,CARA;IASA,YATA,0BASA;MAAA;;MACA,WAAA,CACA,iCADA,CACA,gBADA,EACA;QACA,WAAA,EAAA,KAAA,WADA;QAEA,SAAA,EAAA,KAAA,SAFA;QAGA,SAAA,EAAA,KAAA,SAHA;QAIA,WAAA,EAAA,KAAA;MAJA,CADA,EAOA,IAPA,CAOA,YAAA;QACA,aAAA,CAAA,UAAA,CAAA,gCAAA,EAAA,IAAA;;QACA,MAAA,CAAA,WAAA;MACA,CAVA,EAWA,KAXA,CAWA,UAAA,KAAA,EAAA;QACA,IAAA,KAAA,CAAA,QAAA,CAAA,MAAA,KAAA,GAAA,IAAA,KAAA,CAAA,QAAA,CAAA,MAAA,KAAA,GAAA,EAAA;UACA,aAAA,CAAA,kBAAA,CAAA,kDAAA;QACA,CAFA,MAGA,IAAA,KAAA,CAAA,QAAA,CAAA,MAAA,KAAA,GAAA,EAAA;UACA,aAAA,CAAA,kBAAA,CAAA,6CACA,kCADA;QAEA,CAHA,MAIA;UACA,aAAA,CAAA,kBAAA,CAAA,YACA,wDADA;QAEA;MACA,CAvBA;IAwBA,CAlCA;IAmCA,WAnCA,yBAmCA;MAAA;;MACA,KAAA,UAAA,CAAA,QAAA,GAAA,IAAA,CAAA,UAAA,KAAA,EAAA;QACA,IAAA,KAAA,EAAA;UACA,MAAA,CAAA,YAAA;QACA,CAFA,MAEA;UACA,aAAA,CAAA,QAAA,CAAA,qCAAA,EAAA,IAAA;QACA;MACA,CANA;IAOA;EA3CA,CAnBA;EAgEA,OAhEA,qBAgEA;IACA,IAAA,MAAA,GAAA,OAAA,CAAA,QAAA,CAAA,CADA,CACA;;;IACA,KAAA,OAAA,GAAA,MAAA,GAAA,MAAA,CAAA,eAAA,CAAA;EACA;AAnEA,CAAA","sourcesContent":["<template>\r\n  <div class=\"container-fluid\">\r\n    <div class=\"row justify-content-center\">\r\n      <div class=\"col-xl-5 col-lg-6 col-md-8 col-sm-11\">\r\n\r\n        <h3>Make an appointment</h3>\r\n\r\n        <form id=\"post-form\" @submit.prevent=\"processForm\">\r\n\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"dentistName\">Dentist's name:</label>\r\n            <select class=\"form-control\" id=\"dentistName\" name=\"dentistName\" v-model=\"dentistName\"\r\n                    v-validate=\"{ required: true }\">dentistappDB@localhost\r\n              <option value=\"Mart Tamm\">Mart Tamm</option>\r\n              <option value=\"Maire Kuusk\">Maire Kuusk</option>\r\n              <option value=\"Pille Paju\">Pille Paju</option>\r\n              <option value=\"Tiit Haab\">Tiit Haab</option>\r\n              <option value=\"Milvi Pihlakas\">Milvi Pihlakas</option>\r\n              <option value=\"Priit Vaher\" selected=\"selected\">Priit Vaher</option>\r\n            </select>\r\n            <div class=\"error\" v-if=\"errors.has('dentistName')\">{{errors.first('dentistName')}}</div>\r\n          </div>\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"visitTime\">Appointment date and time:</label>\r\n            <VueCtkDateTimePicker id=\"visitTime\" label=\"Select date and time\" name=\"visitTime\"\r\n                                  format='YYYY-MM-DD HH'\r\n                                  v-validate=\"{required: true}\"\r\n                                  :min-date=\"minDate\"\r\n                                  v-model=\"visitTime\"\r\n                                  :minute-interval=\"60\"\r\n                                  :disabled-hours=\"disabledHours\">\r\n\r\n            </VueCtkDateTimePicker>\r\n            <div class=\"error\" v-if=\"errors.has('visitTime')\">{{errors.first('visitTime')}}</div>\r\n          </div>\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"procedure\">Procedure:</label>\r\n            <input id=\"procedure\" class=\"form-control\" type=\"text\" name=\"procedure\"\r\n                   placeholder=\"Procedure\" v-model=\"procedure\" v-validate=\"{ required: true, min: 5 }\">\r\n            <div class=\"error\" v-if=\"errors.has('procedure')\">{{errors.first('procedure')}}</div>\r\n          </div>\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"description\">Description:</label>\r\n            <textarea class=\"form-control\" id=\"description\" rows=\"3\"\r\n                      name=\"description\" placeholder=\"Description\"\r\n                      v-model=\"description\" v-validate=\"{ required: true, min: 5 }\">\r\n            </textarea>\r\n            <div class=\"error\" v-if=\"errors.has('description')\">{{errors.first('description')}}</div>\r\n          </div>\r\n          <input class=\"btn btn-lg btn-primary mb-3\" type=\"submit\" value=\"Submit\">\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\n    import apiRequests from './../javascript/apiRequests.js';\r\n    import errorHandling from './../javascript/errorHandling.js';\r\n    import VueCtkDateTimePicker from 'vue-ctk-date-time-picker';\r\n    import 'vue-ctk-date-time-picker/dist/vue-ctk-date-time-picker.css';\r\n    import Datepicker from 'vuejs-datepicker';\r\n\r\n\r\n    export default {\r\n        name: 'makeAppointment',\r\n        components: {\r\n          VueCtkDateTimePicker,\r\n\r\n\r\n      },\r\n        data() {\r\n            return {\r\n\r\n                dentistName: '',\r\n                visitTime: '',\r\n                procedure: '',\r\n                description: '',\r\n                dateTime: '',\r\n                disabledHours: ['00','01','02','03','04','05','06','07','19','20','21','22','23'],\r\n                minDate:'',\r\n            };\r\n        },\r\n        methods: {\r\n\r\n            resetFields() {\r\n                this.dentistName = '';\r\n                this.visitTime = '';\r\n                this.procedure = '';\r\n                this.description = '';\r\n                this.$nextTick(() => this.$validator.reset())\r\n            },\r\n            postFormData() {\r\n                apiRequests\r\n                    .postRequestToApiWithAuthorization('/api/add/visit', {\r\n                        dentistName: this.dentistName,\r\n                        visitTime: this.visitTime,\r\n                        procedure: this.procedure,\r\n                        description: this.description,\r\n                    })\r\n                    .then(() => {\r\n                        errorHandling.successMsg(\"Appointment successfully made!\", 1200);\r\n                        this.resetFields();\r\n                    })\r\n                    .catch((error) => {\r\n                        if (error.response.status === 401 || error.response.status === 403) {\r\n                            errorHandling.errorMsgWithButton(\"You need to be logged in to make an appointment!\");\r\n                        }\r\n                        else if(error.response.status === 400) {\r\n                          errorHandling.errorMsgWithButton(\"This appointment time is already taken. \" +\r\n                                  \"Please try a different datetime.\")\r\n                        }\r\n                        else {\r\n                            errorHandling.errorMsgWithButton(\"Sorry, \" +\r\n                                \"there was a problem and could not make an appointment!\");\r\n                        }\r\n                    });\r\n            },\r\n            processForm() {\r\n                this.$validator.validate().then(valid => {\r\n                    if (valid) {\r\n                            this.postFormData();\r\n                    } else {\r\n                        errorHandling.errorMsg(\"The form wasn't filled in properly!\", 1000);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n      mounted() {\r\n        let moment = require('moment'); // require\r\n        this.minDate = moment().format(\"YYYY-MM-DD HH\");\r\n      },\r\n    };\r\n</script>\r\n\r\n\r\n"],"sourceRoot":"src/components"}]}