{"remainingRequest":"C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\src\\components\\AddPost.vue?vue&type=style&index=0&id=ee2bb33e&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\src\\components\\AddPost.vue","mtime":1635333945295},{"path":"C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\node_modules\\css-loader\\index.js","mtime":1639160572603},{"path":"C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1639160575715},{"path":"C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\node_modules\\postcss-loader\\src\\index.js","mtime":1639160574338},{"path":"C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639160574026},{"path":"C:\\Users\\alvar\\Desktop\\downloadhS4qe074722\\assignment_v1.1\\front-end\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1639160574788}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.custom-file-upload {\n  border: 2px solid gray;\n  color: gray;\n  background-color: white;\n  padding: 8px 20px;\n  border-radius: 8px;\n  font-size: 20px;\n  font-weight: bold;\n}\n\ninput[type=file] {\n  display: none;\n}\n",{"version":3,"sources":["AddPost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"AddPost.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"container-fluid\">\r\n    <div class=\"row justify-content-center\">\r\n      <div class=\"col-xl-5 col-lg-6 col-md-8 col-sm-11\">\r\n\r\n        <h3>Create a task for others to solve!</h3>\r\n\r\n        <form id=\"post-form\" @submit.prevent=\"processForm\">\r\n\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"topic\">Topic:</label>\r\n            <select class=\"form-control\" id=\"topic\" name=\"topic\" v-model=\"topic\" v-validate=\"{ required: true }\">\r\n              <option value=\"Mathematics\">Mathematics</option>\r\n              <option value=\"Physics\">Physics</option>\r\n              <option value=\"Chemistry\">Chemistry</option>\r\n              <option value=\"Biology\">Biology</option>\r\n              <option value=\"Computer_Science\">Computer Science</option>\r\n              <option value=\"Varia\" selected=\"selected\">Varia</option>\r\n            </select>\r\n            <div class=\"error\" v-if=\"errors.has('topic')\">{{errors.first('topic')}}</div>\r\n          </div>\r\n\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"title\">Title:</label>\r\n            <input id=\"title\" class=\"form-control\" type=\"text\" name=\"title\" placeholder=\"Title\"\r\n                   v-model=\"title\" v-validate=\"{ required: true, min: 3, max: 128 }\">\r\n            <div class=\"error\" v-if=\"errors.has('title')\">{{errors.first('title')}}</div>\r\n          </div>\r\n\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"description\">Description:</label>\r\n            <textarea class=\"form-control\" id=\"description\" rows=\"3\"\r\n                      name=\"description\" placeholder=\"Description\" onkeydown=\"{if(event.keyCode === 13) return false;}\"\r\n                      v-model=\"description\" v-validate=\"{ required: true, min: 5 }\">\r\n            </textarea>\r\n            <div class=\"error\" v-if=\"errors.has('description')\">{{errors.first('description')}}</div>\r\n          </div>\r\n\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"reward_description\">Reward description:</label>\r\n            <input id=\"reward_description\" class=\"form-control\" type=\"text\" name=\"reward_description\"\r\n                   placeholder=\"Reward description\" v-model=\"reward_description\">\r\n          </div>\r\n\r\n\r\n          <div class=\"form-group text-left\">\r\n            <label for=\"fileUpload\">File:</label><br/>\r\n            <label class=\"custom-file-upload\" for=\"fileUpload\">\r\n              Choose a file\r\n            </label>\r\n            <input type=\"file\" class=\"form-control-file\" id=\"fileUpload\" @change=\"loadTextFromFile\">\r\n            <p>\r\n              <small>\r\n                Max file size: 20MB <br/>\r\n                Allowed file types: .txt, .pdf, .png, .jpg, .doc, .docx, .xls, .xlsx, .rtf, .jpeg, .tiff, .ppt\r\n              </small>\r\n            </p>\r\n          </div>\r\n\r\n          <input class=\"btn btn-lg btn-primary mb-3\" type=\"submit\" value=\"Submit\">\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\n    import apiRequests from './../javascript/apiRequests.js';\r\n    import errorHandling from './../javascript/errorHandling.js';\r\n\r\n    export default {\r\n        name: 'addpost',\r\n        data() {\r\n            return {\r\n                topic: 'Varia',\r\n                title: '',\r\n                description: '',\r\n                reward_description: '',\r\n                file_location: '',\r\n                file: null\r\n            };\r\n        },\r\n        methods: {\r\n            loadTextFromFile(input) {\r\n                this.file = input.target.files[0];\r\n            },\r\n            resetFields() {\r\n                this.topic = 'Varia';\r\n                this.title = '';\r\n                this.description = '';\r\n                this.reward_description = '';\r\n                this.file_location = '';\r\n                this.file = null;\r\n                this.$nextTick(() => this.$validator.reset())\r\n            },\r\n            postFormData() {\r\n                apiRequests\r\n                    .postRequestToApiWithAuthorization('/api/add/post', {\r\n                        topic: this.topic,\r\n                        title: this.title,\r\n                        description: this.description,\r\n                        rewardDescription: this.reward_description,\r\n                        fileLocation: this.file_location,\r\n                    })\r\n                    .then(() => {\r\n                        errorHandling.successMsg(\"Post successfully uploaded!\", 1200);\r\n                        this.resetFields();\r\n                    })\r\n                    .catch((error) => {\r\n                        if (error.response.status === 401 || error.response.status === 403) {\r\n                            errorHandling.errorMsgWithButton(\"You need to be logged in to post!\");\r\n                        } else {\r\n                            errorHandling.errorMsgWithButton(\"Sorry, \" +\r\n                                \"there was a problem and the post couldn't be uploaded!\");\r\n                        }\r\n                    });\r\n            },\r\n            processForm() {\r\n                this.$validator.validate().then(valid => {\r\n                    if (valid) {\r\n                        if (this.file === null || this.file === undefined) {\r\n                            this.postFormData();\r\n                        } else {\r\n                            const formData = new FormData();\r\n                            formData.append('file', this.file);\r\n                            apiRequests\r\n                                .postRequestToApiWithAuthorization('/api/uploadFile', formData)\r\n                                .then((response) => {\r\n                                    this.file_location = response.data.fileDownloadUri;\r\n                                    this.postFormData();\r\n                                })\r\n                                .catch(() => {\r\n                                        errorHandling.errorMsgWithButton(\"There was a problem uploading Your file!\" +\r\n                                            \"Check the limitations!\")\r\n                                    }\r\n                                );\r\n                        }\r\n                    } else {\r\n                        errorHandling.errorMsg(\"The form wasn't filled in properly!\", 1000);\r\n                    }\r\n                });\r\n            },\r\n        },\r\n    };\r\n</script>\r\n\r\n\r\n<style scoped>\r\n  .custom-file-upload {\r\n    border: 2px solid gray;\r\n    color: gray;\r\n    background-color: white;\r\n    padding: 8px 20px;\r\n    border-radius: 8px;\r\n    font-size: 20px;\r\n    font-weight: bold;\r\n  }\r\n\r\n  input[type=file] {\r\n    display: none;\r\n  }\r\n</style>\r\n"]}]}